# SIWIFI服务文档

## 整体功能介绍(xijun)

## 服务组成
### 1. Luci siwifi 私有接口(xijun)
        功能介绍
        软件结构
        设备信息管理机制
            设备信息内容
            设备上下线流程
        版本检查机制
        功能接口

### 2. ssst 服务 (qin.xia)
#### 2.1 功能介绍
  ssst是本地消息处理的主要承担者。它向上承接LUCI、驱动等发出的各种事件，向下负责路由器基本信息的同步，本地状态数据同步、通知远程服务等。

#### 2.2 软件结构
  ssst以单包形式编译进openwrt，以多线程为核心，监听处理多种本地事件并通知给远程，整体框架图如下：
  ![](ssst.png)

#### 2.3 启动初始化介绍
  ssst为自启服务，初始化时通过读取配置文件获取远程IP与port对接远程服务器；初始化各配置文件，创建3个线程分别处理：远程路由器基本信息同步；本地事件监听处理；热插拔事件，上下线通知；同时启动p2p服务。

#### 2.4 siwifi 私有功能介绍
  p2p服务。（P2P介绍 @沈城 @郭喜俊）

### 3. subcloud 服务(xijun)
        功能介绍
        软件结构
        服务器通讯介绍
            初始化流程
            服务器命令上下行流程

        远程执行命令流程介绍

## 家长管控功能(xijun, 除黑白名单相关的部分)
    功能介绍
    软件设计
        上网时间控制
        设备限速
        黑白名单控制
    命令执行和数据持久化存储机制

## QoS功能
    功能介绍
    软件架构
    报文优先级识别流程
    报文QoS发送流程
    数据统计介绍
